jQuery(document).ready(function(n){var d=n("#edd_purchase_form"),e=["AT","BE","BG","HR","CY","CZ","DK","EE","ES","FI","FR","DE","GB","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","SE"];function a(){var d=n("#billing_country");return d.val()==n("#edd_shop_country").val()||-1==n.inArray(d.val(),e)?(n("#edd_vat_number_wrap").hide(),n("#edd_vat_number").val("")):n("#edd_vat_number_wrap").show(),0<n("#edd_tax_id").length&&d.val()==n("#edd_shop_country").val()?n("#edd_tax_id_wrap").show():(n("#edd_tax_id_wrap").hide(),n("#edd_tax_id").val("")),!0}function t(){if("1"==edd_global_vars.taxes_enabled){var a={action:"edd_recalculate_taxes",nonce:jQuery("#edd-checkout-address-fields-nonce").val(),edd_vat_number:d.find("#edd_vat_number").val(),card_zip:d.find(".card-zip").val(),billing_country:d.find("#billing_country").val()};n.ajax({type:"POST",data:a,dataType:"json",url:edd_global_vars.ajaxurl,xhrFields:{withCredentials:!0},success:function(d){n("#edd_checkout_cart").replaceWith(d.html),n(".edd_cart_amount").html(d.total);var e=new Object;e.postdata=a,e.response=d,n("body").trigger("edd_taxes_recalculated",[e])}}).fail(function(d){window.console&&window.console.log&&console.log(d)})}}d.on("change","#billing_country",a),a(),n("body").on("edd_gateway_loaded",function(){a(),t()}),n(document.body).off("change","#edd_cc_address input[name=card_zip]"),d.on("change","#edd_vat_number, #billing_country, .card-zip, #card_state",function(d){return t(),!0})});
