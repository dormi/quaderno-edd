jQuery(document).ready(function(n){var d=n("#edd_purchase_form"),a=["AT","BE","BG","HR","CY","CZ","DK","EE","ES","FI","FR","DE","GB","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","SE"];function e(){var d=n("#billing_country");return 0<=n.inArray(d.val(),a)&&(d.val()!=n("#edd_shop_country").val()?(n("#edd_vat_number_wrap").show(),n("#edd_tax_id_wrap").hide(),n("#edd_tax_id").val("")):(n("#edd_tax_id_wrap").show(),n("#edd_vat_number_wrap").hide(),n("#edd_vat_number").val(""))),!0}function t(){if("1"==edd_global_vars.taxes_enabled){var e={action:"edd_recalculate_taxes",nonce:jQuery("#edd-checkout-address-fields-nonce").val(),edd_vat_number:d.find("#edd_vat_number").val(),card_city:d.find("#card_city").val(),card_zip:d.find("#card_zip").val(),billing_country:d.find("#billing_country").val()};n.ajax({type:"POST",data:e,dataType:"json",url:edd_global_vars.ajaxurl,xhrFields:{withCredentials:!0},success:function(d){n("#edd_checkout_cart").replaceWith(d.html),n(".edd_cart_amount").html(d.total);var a=new Object;a.postdata=e,a.response=d,n("body").trigger("edd_taxes_recalculated",[a])}}).fail(function(d){window.console&&window.console.log&&console.log(d)})}}d.on("change","#billing_country",e),e(),n("body").on("edd_gateway_loaded",function(){e(),t()}),n(document.body).off("change","#edd_cc_address input[name=card_zip]"),d.on("change","#edd_vat_number, #billing_country, #card_state, #card_zip, #card_city",function(d){return t(),!0})});
